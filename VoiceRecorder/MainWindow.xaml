<Window x:Class="VoiceRecorder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:VoiceRecorder"
        Title="ã‚«ãƒ«ã‚¹ãƒ†ãƒƒãƒ— - è¨ºå¯ŸéŸ³å£°è‡ªå‹•è¦ç´„ã‚·ã‚¹ãƒ†ãƒ " Height="600" Width="1110"
        Background="#DDE9F4">
    <!-- ã‚¢ã‚¤ã‚³ãƒ³ã¯å‹•çš„ã«è¨­å®šã™ã‚‹ãŸã‚ã€ã“ã“ã§ã¯æŒ‡å®šã—ãªã„ -->
    <Window.Resources>
        <!-- Converter -->
        <local:SessionIndexConverter x:Key="SessionIndexConverter"/>
        <local:TimeDisplayConverter x:Key="TimeDisplayConverter"/>
        <local:SessionStatusIconConverter x:Key="SessionStatusIconConverter"/>
        <local:SessionStatusColorConverter x:Key="SessionStatusColorConverter"/>
        <!-- åŒ»ç™‚ç”¨ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ -->
        <SolidColorBrush x:Key="WindowBackgroundBrush" Color="#DDE9F4"/>
        <SolidColorBrush x:Key="PrimaryBlueBrush" Color="#2E7FD3"/>
        <SolidColorBrush x:Key="LightBlueBrush" Color="#E8F3FF"/>
        <SolidColorBrush x:Key="SuccessGreenBrush" Color="#27AE60"/>
        <SolidColorBrush x:Key="WarningOrangeBrush" Color="#E67E22"/>
        <SolidColorBrush x:Key="LightGrayBrush" Color="#F5F7FA"/>
        <SolidColorBrush x:Key="MediumGrayBrush" Color="#BDC3C7"/>
        <SolidColorBrush x:Key="DarkGrayBrush" Color="#2C3E50"/>

        <!-- Phase 3: Chromeé¢¨ç¸¦åž‹ã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« -->
        <Style x:Key="VerticalSessionTabItemStyle" TargetType="ListBoxItem">
            <Setter Property="Margin" Value="-20,0,0,6"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Grid>
                            <!-- å·¦ç«¯æ‹¡å¼µéƒ¨åˆ†ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã®ã¿è¡¨ç¤ºï¼‰ -->
                            <Border x:Name="LeftExtension"
                                    Width="20"
                                    Background="White"
                                    HorizontalAlignment="Left"
                                    Margin="-20,0,0,0"
                                    Visibility="Collapsed"
                                    VerticalAlignment="Stretch"/>
                                    
                            <!-- ã‚¿ãƒ–æœ¬ä½“ -->
                            <Border x:Name="TabBorder"
                                    Background="{StaticResource WindowBackgroundBrush}"
                                    BorderBrush="{StaticResource MediumGrayBrush}"
                                    BorderThickness="0,0,0,1"
                                    CornerRadius="6,0,0,6"
                                    SnapsToDevicePixels="True"
                                    MinHeight="60">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/> <!-- å·¦ä½™ç™½ï¼ˆã¯ã¿å‡ºã—20px + ä½™ç™½20pxï¼‰ -->
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆå·¦å¯„ã›/ä¸­å¤®ï¼‰ -->
                                    <ContentPresenter Grid.Column="1"
                                                      Margin="0,8,0,8"
                                                      VerticalAlignment="Center"
                                                      HorizontalAlignment="Stretch"
                                                      RecognizesAccessKey="True"/>
                                                      
                                    <!-- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ï¼ˆãƒ¡ãƒ¢å¸³ãƒœã‚¿ãƒ³ + å‰Šé™¤ãƒœã‚¿ãƒ³ï¼‰ -->
                                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Stretch">
                                        <!-- ðŸ“ãƒ¡ãƒ¢å¸³ãƒœã‚¿ãƒ³ï¼ˆäº‹å‰æƒ…å ±å…¥åŠ›ç”¨ï¼‰ v30.0è¿½åŠ  -->
                                        <Button x:Name="PreInfoButton"
                                                Content="ðŸ“"
                                                FontSize="14"
                                                Width="32"
                                                Padding="0"
                                                Margin="0"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Foreground="{StaticResource PrimaryBlueBrush}"
                                                VerticalAlignment="Stretch"
                                                HorizontalAlignment="Center"
                                                Cursor="Hand"
                                                ToolTip="äº‹å‰æƒ…å ±ã‚’å…¥åŠ›"
                                                PreviewMouseLeftButtonDown="PreInfoButton_PreviewMouseLeftButtonDown"
                                                Click="PreInfoButton_Click">
                                            <Button.Tag>
                                                <Binding RelativeSource="{RelativeSource AncestorType=ListBoxItem}" Path="DataContext"/>
                                            </Button.Tag>
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border x:Name="PreInfoBtnBorder" 
                                                                        Background="{TemplateBinding Background}"
                                                                        BorderThickness="0"
                                                                        CornerRadius="0">
                                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                                      VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter TargetName="PreInfoBtnBorder" Property="Background" Value="#E8F3FF"/>
                                                                        <Setter Property="Foreground" Value="#2E7FD3"/>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="#2E7FD3"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                        
                                        <!-- Ã—ãƒœã‚¿ãƒ³ï¼ˆã‚¿ãƒ–å‰Šé™¤ç”¨ï¼‰ -->
                                        <Button x:Name="DeleteButton"
                                                Content="Ã—"
                                                FontSize="16"
                                                FontWeight="Bold"
                                                Width="40"
                                                Padding="0"
                                                Margin="0"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Foreground="#666666"
                                                VerticalAlignment="Stretch"
                                                HorizontalAlignment="Right"
                                                Cursor="Hand"
                                                PreviewMouseLeftButtonDown="DeleteButton_PreviewMouseLeftButtonDown"
                                                Click="DeleteSessionButton_Click">
                                            <Button.Tag>
                                                <Binding RelativeSource="{RelativeSource AncestorType=ListBoxItem}" Path="DataContext"/>
                                            </Button.Tag>
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border x:Name="BtnBorder" 
                                                                        Background="{TemplateBinding Background}"
                                                                        BorderThickness="0"
                                                                        CornerRadius="0">
                                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                                      VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter TargetName="BtnBorder" Property="Background" Value="#FFE0E0"/>
                                                                        <!-- ãƒ†ã‚­ã‚¹ãƒˆè‰²ã‚‚èµ¤ãã™ã‚‹ -->
                                                                        <Setter Property="Foreground" Value="#CC0000"/>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <!-- Style Triggerã§Foregroundã‚’å¤‰ãˆã‚‹ -->
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="#CC0000"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <!-- ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ï¼ˆé¸æŠžä¸­ï¼‰ -->
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="TabBorder" Property="Background" Value="White"/>
                                <!-- å¢ƒç•Œç·šã‚’æ¶ˆã™ã«ã¯ BorderBrushã‚’ç™½ã«è¨­å®š -->
                                <Setter TargetName="TabBorder" Property="BorderThickness" Value="0,1,0,1"/>
                                <Setter TargetName="TabBorder" Property="BorderBrush" Value="White"/>
                                <Setter Property="Foreground" Value="Black"/>
                                <!-- è¦ç´„ã‚¨ãƒªã‚¢ã¨å®Œå…¨ã«ãã£ã¤ã‘ã‚‹ãŸã‚ã€å·¦å´ã«ã¯ã¿å‡ºã™ï¼ˆã‚¹ãƒšãƒ¼ã‚µãƒ¼20px + æ‚£è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ã®Paddingå·¦0 = 20pxï¼‰ -->
                                <!-- Chromeé¢¨ã«ä¸Šä¸‹ã«åºƒãŒã‚‹å½¢çŠ¶ã«ã™ã‚‹ãŸã‚ã€Marginã‚’èª¿æ•´ -->
                                <Setter Property="Margin" Value="-20,-3,0,3"/>
                                <Setter Property="Panel.ZIndex" Value="10"/>
                                <!-- Chromeé¢¨ã®å½¢çŠ¶ï¼šå·¦ç«¯ã‚’ä¸Šä¸‹ã«åºƒã’ã‚‹ -->
                                <Setter TargetName="TabBorder" Property="CornerRadius" Value="0,0,0,0"/>
                                <!-- å·¦ç«¯æ‹¡å¼µéƒ¨åˆ†ã‚’è¡¨ç¤ºã—ã€ä¸Šä¸‹ã«åºƒã’ã‚‹ -->
                                <Setter TargetName="LeftExtension" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="LeftExtension" Property="Margin" Value="-20,-3,0,3"/>
                            </Trigger>
                            <!-- éžã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã®ãƒ›ãƒãƒ¼æ™‚ -->
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSelected" Value="False"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="TabBorder" Property="Background" Value="#EEF5FF"/>
                            </MultiTrigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="{StaticResource MediumGrayBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- ã‚·ãƒ³ãƒ—ãƒ«ãªãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBlueBrush}"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBlueBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryBlueBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="RecordButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SuccessGreenBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="40"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="White"/>
                    <Setter Property="Foreground" Value="#27AE60"/>
                    <Setter Property="BorderBrush" Value="#27AE60"/>
                    <Setter Property="BorderThickness" Value="3"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="StopButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#E74C3C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="40"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="White"/>
                    <Setter Property="Foreground" Value="#E74C3C"/>
                    <Setter Property="BorderBrush" Value="#E74C3C"/>
                    <Setter Property="BorderThickness" Value="3"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="{StaticResource WarningOrangeBrush}"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="BorderBrush" Value="{StaticResource WarningOrangeBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource WarningOrangeBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="ãƒ•ã‚¡ã‚¤ãƒ«">
                <MenuItem Header="éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã¨æ–‡å­—èµ·ã“ã—å…¨æ–‡ã‚’è¡¨ç¤º" Click="OpenTempFolder_Click"/>
                <MenuItem Header="ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªã™ã‚‹" Click="OpenLogFolder_Click"/>
                <MenuItem Header="çµ‚äº†" Click="ExitMenuItem_Click"/>
            </MenuItem>
            <MenuItem Header="è¨­å®š">
                <MenuItem Header="è£œæ­£è¾žæ›¸ã®ç·¨é›†" Click="EditDictionary_Click"/>
                <MenuItem Header="ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç·¨é›†" Click="EditSystemPrompt_Click"/>
                <MenuItem Header="API-keyã®ç™»éŒ²" Click="EditApiKey_Click"/>
            </MenuItem>
            <MenuItem Header="è¨ºç™‚ç§‘é¸æŠž" Name="DepartmentMenu">
                <!-- ã“ã“ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¹ãƒˆãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
            </MenuItem>
            <MenuItem Header="è¦ç´„ã‚’å†ç”Ÿæˆ" Name="RegenerateMenu">
                <!-- v30.0: ã“ã“ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¹ãƒˆãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
            </MenuItem>
        </Menu>
        
        <Grid Margin="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition x:Name="SessionSpacerColumn" Width="20"/>
                <ColumnDefinition x:Name="SessionPanelColumn" Width="200"/>
            </Grid.ColumnDefinitions>
            
            <!-- å·¦åˆ—ï¼šã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
            <Border Grid.Column="0" Background="White" CornerRadius="8" Padding="20">
                <Grid>
                    <!-- ãƒ©ã‚¤ã‚»ãƒ³ã‚¹èªè¨¼UI -->
                    <StackPanel x:Name="LicensePanel" VerticalAlignment="Center" HorizontalAlignment="Center" Visibility="Collapsed">
                        <TextBlock Text="ðŸ” èªè¨¼ãŒå¿…è¦ã§ã™" FontSize="30" FontWeight="Bold" 
                                   Foreground="{StaticResource DarkGrayBrush}" Margin="0,0,0,15"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="ã“ã®ç«¯æœ«ã¯ã¾ã èªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚" FontSize="14" 
                                   Foreground="{StaticResource DarkGrayBrush}" Margin="0,0,0,5"/>
                        <TextBlock Text="ä¸‹è¨˜ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢IDã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€" FontSize="14" 
                                   Foreground="{StaticResource DarkGrayBrush}" Margin="0,0,0,2"/>
                        <TextBlock Text="mjsc0mpa2@gmail.com ã¾ã§ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚" FontSize="14" 
                                   Foreground="{StaticResource DarkGrayBrush}" Margin="0,0,0,15"/>

                        <Border Background="{StaticResource LightGrayBrush}" 
                                Padding="15" 
                                BorderBrush="{StaticResource MediumGrayBrush}" 
                                BorderThickness="1" 
                                CornerRadius="6"
                                Margin="0,0,0,15">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="HwidTextBlock" 
                                           Text="HWID-1234-ABCD-5678" 
                                           FontFamily="Consolas" 
                                           FontSize="16"/>
                                <Button Content="ðŸ“‹" 
                                        Margin="10,0,0,0" 
                                        Click="CopyHwid_Click"
                                        Width="30" Height="25"
                                        VerticalAlignment="Bottom"/>
                            </StackPanel>
                        </Border>
                        
                        <Button Content="âœ‰ ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡" 
                                Click="SendEmail_Click"
                                Style="{StaticResource PrimaryButtonStyle}"
                                Width="200" Height="40"
                                Margin="0,0,0,20"/>
                        
                        <TextBlock Text="èªè¨¼æ¸ˆã¿ã®æ–¹ã¯ã€ã‚¢ãƒ—ãƒªã®å†èµ·å‹•ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚" 
                                   FontSize="16" 
                                   Foreground="Black"
                                   HorizontalAlignment="Center"
                                   TextWrapping="Wrap"
                                   Width="230"/>
                    </StackPanel>
                    
                    <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªUI -->
                    <StackPanel x:Name="MainAppPanel" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ† -->
                        <StackPanel Margin="0,0,0,25">
                            <TextBlock Text="ã‚«ãƒ«ã‚¹ãƒ†ãƒƒãƒ—" 
                                       FontSize="50" 
                                       FontWeight="Bold" 
                                       Foreground="{StaticResource DarkGrayBrush}"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="è¨ºå¯ŸéŸ³å£°è‡ªå‹•è¦ç´„ã‚·ã‚¹ãƒ†ãƒ " 
                                       FontSize="16" 
                                       Foreground="{StaticResource DarkGrayBrush}"
                                       HorizontalAlignment="Center"
                                       Margin="0,5,0,0"/>
                            <TextBlock Name="SelectedPromptText" 
                                       Text="00. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ" 
                                       FontSize="18" 
                                       Foreground="{StaticResource PrimaryBlueBrush}"
                                       HorizontalAlignment="Center"
                                       FontWeight="Medium"
                                       Margin="0,8,0,0"/>
                        </StackPanel>

                        <!-- éŒ²éŸ³ãƒœã‚¿ãƒ³ -->
                        <Button Name="RecordButton" 
                                Click="RecordButton_Click"
                                Width="200" 
                                Height="60" 
                                Margin="0,0,0,10" 
                                Content="START"
                                Style="{StaticResource RecordButtonStyle}"
                                MouseEnter="RecordButton_MouseEnter"
                                MouseLeave="RecordButton_MouseLeave"/>
                        
                        <!-- ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³ -->
                        <Button Name="PauseButton" 
                                Click="PauseButton_Click"
                                Width="200" 
                                Height="40" 
                                Margin="0,0,0,15" 
                                Content="â¸ ä¸€æ™‚åœæ­¢"
                                Style="{StaticResource SecondaryButtonStyle}"/>
                        
                        <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º -->
                        <Border Background="{StaticResource LightBlueBrush}" 
                                CornerRadius="15" 
                                Padding="12,6"
                                Margin="0,0,0,20">
                            <TextBlock Name="StatusText" 
                                       Text="ðŸŸ¢ æº–å‚™å®Œäº†" 
                                       FontSize="18" 
                                       Foreground="{StaticResource PrimaryBlueBrush}"
                                       TextAlignment="Center"/>
                        </Border>
                        
                        <!-- è¦ç´„ã‚’é–‹ããƒœã‚¿ãƒ³ -->
                        <Button Name="ViewSummary" 
                                Content="ðŸ“‹ è¦ç´„ã‚’è¡¨ç¤º" 
                                Click="ViewSummary_Click"
                                Width="200" 
                                Height="45"
                                Style="{StaticResource PrimaryButtonStyle}"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- è¦ç´„çµæžœãƒ‘ãƒãƒ«ï¼ˆç‹¬ç«‹ã—ãŸç™½ã„èƒŒæ™¯ã‚¨ãƒªã‚¢ï¼‰ -->
            <Border Grid.Column="2" Grid.ColumnSpan="2" Background="White" CornerRadius="8" Padding="20,20,20,20" SnapsToDevicePixels="True">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                    <Grid Grid.Row="0" Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Bottom">
                            <TextBlock Text="ðŸ“„è¦ç´„çµæžœ" 
                                       FontSize="32" 
                                       FontWeight="Bold" 
                                       Foreground="{StaticResource DarkGrayBrush}"/>
                            <TextBlock Text="ï¼ˆãƒ†ã‚­ã‚¹ãƒˆç·¨é›†å¯èƒ½ï¼‰" 
                                       FontSize="16" 
                                       Foreground="{StaticResource DarkGrayBrush}"
                                       Margin="0,0,0,4"
                                       VerticalAlignment="Bottom"/>
                        </StackPanel>
                        <Button Grid.Column="1"
                                Name="CopyTextButton"
                                Content="ðŸ“‹ è¦ç´„çµæžœã‚’ã‚³ãƒ”ãƒ¼"
                                Click="CopyTextButton_Click"
                                Width="160" Height="40"
                                FontSize="16"
                                ToolTip="Alt+ãƒ•ãƒƒãƒˆã‚¹ã‚¤ãƒƒãƒã§è»¢è¨˜å¯èƒ½ã§ã™"/>
                        <!-- æ‚£è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‘ãƒãƒ«æŠ˜ã‚ŠãŸãŸã¿ãƒœã‚¿ãƒ³ï¼ˆç¸¦é•·ãƒ»ç´°ã„ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰ -->
                        <Button Grid.Column="2"
                                x:Name="SessionPanelToggleButton"
                                Click="SessionPanelToggleButton_Click"
                                Width="16" Height="40"
                                Margin="8,0,0,0"
                                ToolTip="æ‚£è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‘ãƒãƒ«ã‚’æŠ˜ã‚ŠãŸãŸã‚€/å±•é–‹ã™ã‚‹"
                                Background="#F0F0F0"
                                BorderBrush="{StaticResource MediumGrayBrush}"
                                BorderThickness="1"
                                Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="ToggleBtnBorder"
                                            Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="3">
                                        <TextBlock x:Name="ToggleIcon"
                                                   Text="â€º"
                                                   FontSize="14"
                                                   FontWeight="Bold"
                                                   Foreground="{StaticResource DarkGrayBrush}"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="ToggleBtnBorder" Property="Background" Value="{StaticResource LightBlueBrush}"/>
                                            <Setter TargetName="ToggleIcon" Property="Foreground" Value="{StaticResource PrimaryBlueBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                    
                    <!-- éŒ²éŸ³æƒ…å ±ã‚«ãƒ¼ãƒ‰ -->
                    <Border Grid.Row="1"
                            Background="{StaticResource LightGrayBrush}" 
                            CornerRadius="6" 
                            Padding="15" 
                            Margin="0,0,0,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="ðŸ“… æ—¥ä»˜" FontSize="11" FontWeight="Bold" 
                                           Foreground="{StaticResource MediumGrayBrush}" Margin="0,0,0,2"/>
                                <TextBlock Name="DateDisplayTextBlock" 
                                           Text="{Binding CurrentDate}" 
                                           FontFamily="Meiryo UI" 
                                           FontSize="13"
                                           Foreground="{StaticResource DarkGrayBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="ðŸ• æ™‚åˆ»" FontSize="11" FontWeight="Bold" 
                                           Foreground="{StaticResource MediumGrayBrush}" Margin="0,0,0,2"/>
                                <TextBlock Name="TimeDisplayTextBlock" 
                                           Text="{Binding CurrentTime}" 
                                           FontFamily="Meiryo UI" 
                                           FontSize="13"
                                           Foreground="{StaticResource DarkGrayBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="ðŸ‘¤ æ‚£è€…" FontSize="11" FontWeight="Bold" 
                                           Foreground="{StaticResource MediumGrayBrush}" Margin="0,0,0,2"/>
                                <TextBlock Name="PatientNameTextBlock" 
                                           Text="{Binding CurrentPatientName}" 
                                           FontFamily="Meiryo UI" 
                                           FontSize="13"
                                           Foreground="{StaticResource DarkGrayBrush}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- è¦ç´„ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ -->
                    <TextBox Grid.Row="2"
                             Name="SummaryTextBox"
                             AcceptsReturn="True"
                             TextWrapping="Wrap"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                             FontFamily="Meiryo UI"
                             FontSize="16"
                             Background="White"
                             BorderBrush="{StaticResource MediumGrayBrush}"
                             BorderThickness="1"
                             Padding="10"
                             Text="{Binding SummaryText, UpdateSourceTrigger=PropertyChanged}"/>
                </Grid>
            </Border>

            <!-- v30.0: äº‹å‰æƒ…å ±å…¥åŠ›ãƒ‘ãƒãƒ«ï¼ˆã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰ -->
            <Border x:Name="PreInfoPanel"
                    Grid.Column="2" Grid.ColumnSpan="2"
                    Background="White"
                    CornerRadius="8"
                    Padding="20"
                    Visibility="Collapsed"
                    Panel.ZIndex="100">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="ðŸ“ äº‹å‰æƒ…å ±å…¥åŠ›"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource DarkGrayBrush}"/>
                        <TextBlock Text="ï¼ˆå‰å›žã‚«ãƒ«ãƒ†ã€å•è¨ºæƒ…å ±ãªã©ï¼‰"
                                   FontSize="14"
                                   Foreground="{StaticResource MediumGrayBrush}"
                                   VerticalAlignment="Bottom"
                                   Margin="10,0,0,6"/>
                    </StackPanel>
                    
                    <!-- ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæ‚£è€…åï¼‰å…¥åŠ›æ¬„ -->
                    <Grid Grid.Row="1" Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="æ‚£è€…å:"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource DarkGrayBrush}"/>
                        <TextBox x:Name="PreInfoTitleTextBox"
                                 Grid.Column="1"
                                 FontSize="16"
                                 FontFamily="Meiryo UI"
                                 Padding="10,8"
                                 BorderBrush="{StaticResource MediumGrayBrush}"
                                 BorderThickness="1"/>
                    </Grid>
                    
                    <!-- äº‹å‰æƒ…å ±ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ -->
                    <TextBox Grid.Row="2"
                             x:Name="PreInfoContentTextBox"
                             AcceptsReturn="True"
                             TextWrapping="Wrap"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                             FontFamily="Meiryo UI"
                             FontSize="16"
                             Background="White"
                             BorderBrush="{StaticResource MediumGrayBrush}"
                             BorderThickness="1"
                             Padding="10"/>
                    
                    <!-- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
                    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
                        <Button Content="ã‚­ãƒ£ãƒ³ã‚»ãƒ«"
                                Click="PreInfoCancelButton_Click"
                                Width="120" Height="40"
                                Margin="0,0,10,0"
                                Style="{StaticResource SecondaryButtonStyle}"/>
                        <Button Content="ðŸ’¾ ä¿å­˜"
                                Click="PreInfoSaveButton_Click"
                                Width="120" Height="40"
                                Style="{StaticResource PrimaryButtonStyle}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- æ‚£è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ï¼ˆå³å´ã€æ°´è‰²èƒŒæ™¯ï¼‰ -->
            <Border Grid.Column="4" Background="{StaticResource WindowBackgroundBrush}" CornerRadius="0,8,8,0" Padding="0,15,15,15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Grid.Row="0"
                               Text="æ‚£è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³" 
                               FontSize="16" 
                               FontWeight="Bold" 
                               Foreground="{StaticResource DarkGrayBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,10"/>

                    <ScrollViewer Grid.Row="1"
                                  VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled"
                                  CanContentScroll="False">
                        <StackPanel>
                            <ListBox Name="SessionListBox"
                                     ItemsSource="{Binding Sessions}"
                                     SelectionChanged="SessionListBox_SelectionChanged"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     PreviewMouseWheel="SessionListBox_PreviewMouseWheel"
                                     PreviewMouseLeftButtonDown="SessionListBox_PreviewMouseLeftButtonDown"
                                     ItemContainerStyle="{StaticResource VerticalSessionTabItemStyle}"
                                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                     ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <!-- 1è¡Œç›®ï¼šç•ªå· + éŒ²éŸ³æ™‚åˆ» + ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
                                            <Grid Grid.Row="0" VerticalAlignment="Center">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <!-- ç•ªå· + éŒ²éŸ³æ™‚åˆ»ï¼ˆä¸­å¤®å›ºå®šï¼‰ -->
                                                <TextBlock Grid.Column="1"
                                                           TextAlignment="Center"
                                                           FontSize="12"
                                                           Foreground="Black"
                                                           VerticalAlignment="Center"
                                                           Margin="0">
                                                    <TextBlock.Text>
                                                        <MultiBinding StringFormat="{}{0} {1}">
                                                            <Binding Path="." Converter="{StaticResource SessionIndexConverter}"/>
                                                            <Binding Path="RecordingStartTime" Converter="{StaticResource TimeDisplayConverter}"/>
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                                
                                                <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆä¸­å¤®ã®å³éš£ï¼‰ -->
                                                <TextBlock Grid.Column="2"
                                                           FontSize="14"
                                                           FontWeight="Bold"
                                                           VerticalAlignment="Center"
                                                           HorizontalAlignment="Left"
                                                           Margin="4,0,0,0">
                                                    <TextBlock.Text>
                                                        <MultiBinding Converter="{StaticResource SessionStatusIconConverter}">
                                                            <Binding Path="IsRecording" />
                                                            <Binding Path="IsPaused" />
                                                            <Binding Path="IsStopped" />
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                    <TextBlock.Foreground>
                                                        <MultiBinding Converter="{StaticResource SessionStatusColorConverter}">
                                                            <Binding Path="IsRecording" />
                                                            <Binding Path="IsPaused" />
                                                            <Binding Path="IsStopped" />
                                                        </MultiBinding>
                                                    </TextBlock.Foreground>
                                                </TextBlock>
                                            </Grid>
                                            <!-- 2è¡Œç›®ï¼šæ‚£è€…åï¼ˆç·¨é›†å¯èƒ½ãªTextBoxï¼‰ -->
                                            <TextBox Grid.Row="1"
                                                     x:Name="PatientNameTextBox"
                                                     Text="{Binding PatientName, UpdateSourceTrigger=LostFocus}"
                                                     TextAlignment="Center"
                                                     FontSize="14"
                                                     FontWeight="Medium"
                                                     Foreground="Black"
                                                     Margin="0,2,0,0"
                                                     VerticalContentAlignment="Center"
                                                     PreviewMouseLeftButtonDown="PatientNameTextBox_PreviewMouseLeftButtonDown"
                                                     GotFocus="PatientNameTextBox_GotFocus"
                                                     LostFocus="PatientNameTextBox_LostFocus">
                                                <TextBox.Style>
                                                    <Style TargetType="TextBox">
                                                        <!-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®è¨­å®š -->
                                                        <Setter Property="Background" Value="Transparent"/>
                                                        <Setter Property="BorderThickness" Value="0"/>
                                                        <Setter Property="Padding" Value="5,0,0,0"/> <!-- ãƒ†ã‚­ã‚¹ãƒˆã¨æž ã®é–“ã®ä½™ç™½ -->
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="TextBox">
                                                                    <Border x:Name="Bd"
                                                                            Background="{TemplateBinding Background}"
                                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                                            Padding="{TemplateBinding Padding}">
                                                                        <ScrollViewer x:Name="PART_ContentHost" 
                                                                                      Focusable="false" 
                                                                                      HorizontalScrollBarVisibility="Hidden" 
                                                                                      VerticalScrollBarVisibility="Hidden"/>
                                                                    </Border>
                                                                    <!-- ControlTemplateå†…ãƒˆãƒªã‚¬ãƒ¼ã§ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´ã‚’ç¢ºå®Ÿã«é©ç”¨ -->
                                                                    <ControlTemplate.Triggers>
                                                                        <Trigger Property="IsFocused" Value="True">
                                                                            <Setter TargetName="Bd" Property="Background" Value="#E8F3FF"/>
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource PrimaryBlueBrush}"/>
                                                                            <Setter TargetName="Bd" Property="BorderThickness" Value="2"/>
                                                                        </Trigger>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <!-- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒãªã„æ™‚ã®ã¿ãƒžã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼è‰²ã‚’é©ç”¨ -->
                                                                            <Setter TargetName="Bd" Property="Background" Value="#F5F7FA"/>
                                                                        </Trigger>
                                                                        <!-- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã¯ãƒžã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼ãŒã‚ã£ã¦ã‚‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è‰²ã‚’å„ªå…ˆ -->
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="IsMouseOver" Value="True"/>
                                                                                <Condition Property="IsFocused" Value="True"/>
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="#E8F3FF"/>
                                                                        </MultiTrigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <!-- ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆç­‰ã®å¤‰æ›´ã¯Styleãƒˆãƒªã‚¬ãƒ¼ã§è¡Œã† -->
                                                        <Style.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="FontWeight" Value="Bold"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Style>
                                            </TextBox>
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                            
                            <!-- æ–°è¦æ‚£è€…ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒ–ã®ä¸‹ã«é…ç½®ï¼ˆChromeé¢¨ï¼‰ -->
                            <Button Content="âž• æ–°è¦æ‚£è€…"
                                    Click="AddNewSessionButton_Click"
                                    Style="{StaticResource PrimaryButtonStyle}"
                                    Width="170"
                                    Height="35"
                                    Margin="0,6,0,0"
                                    HorizontalAlignment="Center"/>
                            
                            <!-- v30.0: äº‹å‰æƒ…å ±å…¥åŠ›ã®æ¡ˆå†…ãƒ†ã‚­ã‚¹ãƒˆ -->
                            <TextBlock Text="ðŸ“ã‚’æŠ¼ã™ã¨äº‹å‰æƒ…å ±ã‚’&#10;ç™»éŒ²ã§ãã¾ã™"
                                       FontSize="16"
                                       Foreground="{StaticResource DarkGrayBrush}"
                                       HorizontalAlignment="Center"
                                       Margin="0,8,0,0"
                                       TextWrapping="Wrap"
                                       TextAlignment="Center"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>
